---
layout: default
---

{% assign assets_base_url = site.url %}
{% if site.cdn.jsdelivr.enabled %}
{% assign assets_base_url = "https://fastly.jsdelivr.net/gh/" | append: site.repository | append: '@master' %}
{% endif %}

<section class="collection-head small geopattern" data-pattern-id="{{ page.subcategory | truncate: 15, ''}}">
    <div class="container">
        <div class="columns">
            <div class="column two-thirds">
                <div class="collection-title">
                    <h1 class="collection-header">
                        <a href="/categories/#{{ page.posts.first.categories.first }}">{{ page.posts.first.categories.first }}</a> 
                        / {{ page.subcategory }}
                    </h1>
                    <div class="collection-info">
                        <span class="meta-info">共 {{ page.posts | size }} 篇文章</span>
                        <span class="meta-info">更新于 {{ page.posts.first.date | date: "%Y-%m-%d" }}</span>
                    </div>
                </div>
            </div>
            <div class="column one-third mobile-hidden">
              {% include sidebar-qrcode.html %}
            </div>
        </div>
    </div>
</section>

<section class="container content">
    <div class="columns">
        <div class="column two-thirds">
            <article class="article-content markdown-body">
                <!-- 子分类文章列表 -->
                <div class="subcategory-content">
                    <div class="timeline-view">
                        {% assign sorted_posts = page.posts | sort: 'date' | reverse %}
                        {% for post in sorted_posts %}
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="post-header">
                                    <h3 class="post-title">
                                        <a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
                                    </h3>
                                    <div class="post-meta">
                                        <span class="post-date">{{ post.date | date: "%Y年%m月%d日" }}</span>
                                        {% if post.categories.size > 2 %}
                                        <span class="additional-categories">
                                            {% for cat in post.categories offset:2 %}
                                            <span class="category-tag">{{ cat }}</span>
                                            {% endfor %}
                                        </span>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                {% if post.description %}
                                <div class="post-excerpt">
                                    {{ post.description }}
                                </div>
                                {% endif %}
                                
                                {% if post.keywords %}
                                <div class="post-tags">
                                    {% for tag in post.keywords %}
                                    <span class="tag">{{ tag }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- 统计信息 -->
                <div class="subcategory-stats">
                    <h3>统计信息</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number">{{ page.posts | size }}</span>
                            <span class="stat-label">文章总数</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">{{ page.posts | map: 'date' | sort | last | date: "%Y" }}</span>
                            <span class="stat-label">最新更新</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">{{ page.posts | map: 'date' | sort | first | date: "%Y" }}</span>
                            <span class="stat-label">最早发布</span>
                        </div>
                    </div>
                </div>
            </article>
            
            <div class="share">
                {% include sns-share.html %}
            </div>
            <div class="comment">
                {% include comments.html %}
            </div>
        </div>
        
        <div class="column one-third">
            {% include sidebar-search.html %}
            {% include sidebar-categories-nav.html %}
            {% include sidebar-ad.html %}
        </div>
    </div>
</section>

<style>
.timeline-view {
    position: relative;
    padding-left: 30px;
}

.timeline-view:before {
    content: '';
    position: absolute;
    left: 15px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #e1e8ed;
}

.timeline-item {
    position: relative;
    margin-bottom: 30px;
}

.timeline-marker {
    position: absolute;
    left: -37px;
    top: 8px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #4183c4;
    border: 3px solid white;
    box-shadow: 0 0 0 2px #4183c4;
}

.timeline-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.post-header {
    margin-bottom: 15px;
}

.post-title {
    margin: 0 0 10px 0;
    font-size: 1.3em;
}

.post-meta {
    display: flex;
    align-items: center;
    gap: 15px;
    color: #666;
    font-size: 0.9em;
}

.category-tag {
    background: #f0f0f0;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.8em;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-top: 20px;
}

.stat-item {
    text-align: center;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.stat-number {
    display: block;
    font-size: 1.8em;
    font-weight: bold;
    color: #4183c4;
}

.stat-label {
    display: block;
    color: #666;
    margin-top: 5px;
}
</style>